(this.webpackJsonppicture=this.webpackJsonppicture||[]).push([[1],{104:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),o=n(10),a=n.n(o),c=(n(79),n(80),n(3)),s=n(25),l=n(17),u=n(26),p=n(32),f=n(48),b=n(50);function y(){var e=Object(s.a)(["\nmin-height: 52px;\nbackground-color: #000;\ncolor: #fff;\ndisplay: flex;\nalign-items: center;\njustify-content: space-between;\npadding: 0 80px;\n.linkWrapper{\nwidth: 110px;\ndisplay: flex;\njustify-content: space-between;\n.selected{\n\n}\na:active{\ncolor: dodgerblue;\n}\n}\n.btnWrapper{\nwidth: 180px;\ndisplay: flex;\njustify-content: space-between;\nalign-items: center;\n}\n"]);return y=function(){return e},e}var h=u.a.div(y()),m=Object(b.a)((function(){var e=Object(f.a)(),t=e.UserStore,n=e.AuthStore,o=Object(c.f)(),a=Object(r.useRef)(null),s=Object(r.useRef)(null),u=a,b=function(e){if(u===e)return"selected"},y=function(e){u=e.target};return i.a.createElement(h,null,i.a.createElement("div",{className:"linkWrapper"},i.a.createElement(l.b,{to:"/",ref:a,onClick:y,className:b(a)},"\u9996\u9875"),i.a.createElement(l.b,{to:"/history",ref:s,onClick:y,className:b(s)},"\u4e0a\u4f20\u5386\u53f2")),t&&t.currentUser?i.a.createElement("div",{className:"btnWrapper"},i.a.createElement("span",null,"hello , ",t.currentUser.attributes.username," !"),i.a.createElement(p.a,{onClick:function(){n.logout()}},"\u6ce8\u9500")):i.a.createElement("div",{className:"btnWrapper"},i.a.createElement(p.a,{onClick:function(){o.push("/login")}},"\u767b\u5f55"),i.a.createElement(p.a,{onClick:function(){o.push("/register")}},"\u6ce8\u518c")))}));var O=function(){return i.a.createElement("div",null,"loading")},g=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(5),n.e(9)]).then(n.bind(null,216))})),j=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(4),n.e(8)]).then(n.bind(null,209))})),d=Object(r.lazy)((function(){return n.e(6).then(n.bind(null,210))})),w=Object(r.lazy)((function(){return n.e(7).then(n.bind(null,211))}));var v=function(){return i.a.createElement("div",{className:"app"},i.a.createElement(m,null),i.a.createElement(r.Suspense,{fallback:i.a.createElement(O,null)},i.a.createElement(c.c,null,i.a.createElement(c.a,{path:"/",exact:!0},i.a.createElement(g,null)),i.a.createElement(c.a,{path:"/history",component:j}),i.a.createElement(c.a,{path:"/login",component:d}),i.a.createElement(c.a,{path:"/register",component:w}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(103);a.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(l.a,null,i.a.createElement(v,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},32:function(e,t,n){"use strict";var r=n(25);function i(){var e=Object(r.a)(["\nmin-width: 80px;\n    padding: 8px 24px;\n    background-color: dodgerblue;\n    color: #fff;\n    border: none;\n    border-radius: 4px;\n"]);return i=function(){return e},e}var o=n(26).a.button(i());t.a=o},48:function(e,t,n){"use strict";var r=n(4),i=n(11),o=n(12),a=n(2),c=(n(31),n(1)),s=n(8),l=n.n(s);l.a.init({appId:"T9DjYIQTHtdtIRxse73sxGKc-gzGzoHsz",appKey:"7LX0NQpt54wRwqScQl7snAgf",serverURL:"https://t9djyiqt.lc-cn-n1-shared.com"});var u,p,f,b,y,h,m,O,g,j,d,w,v,U,k,P,E,z=function(e,t){var n=new s.User;return n.setUsername(e),n.setPassword(t),new Promise((function(e,t){n.signUp().then((function(t){return e(t)}),(function(e){t(e)}))}))},x=function(e,t){return new Promise((function(n,r){s.User.logIn(e,t).then((function(e){return n(e)}),(function(e){return r(e)}))}))},D=function(){s.User.logOut()},L=function(){return s.User.current()},N=function(e,t){var n=new l.a.Object("Image"),r=new l.a.File(t,e);return n.set("fileName",t),n.set("owner",l.a.User.current()),n.set("url",r),new Promise((function(e,t){n.save().then((function(t){e(t)}),(function(e){t(e)}))}))},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=new l.a.Query("Image");return n.include("owner"),n.limit(t),n.skip(e*t),n.descending("createdAt"),n.equalTo("owner",l.a.User.current()),new Promise((function(e,t){n.find().then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},I=new(u=function(){function e(){Object(i.a)(this,e),Object(r.a)(this,"currentUser",p,this)}return Object(o.a)(e,[{key:"pullUser",value:function(){this.currentUser=L()}},{key:"resetUser",value:function(){this.currentUser=null}}]),e}(),p=Object(a.a)(u.prototype,"currentUser",[c.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(a.a)(u.prototype,"pullUser",[c.f],Object.getOwnPropertyDescriptor(u.prototype,"pullUser"),u.prototype),Object(a.a)(u.prototype,"resetUser",[c.f],Object.getOwnPropertyDescriptor(u.prototype,"resetUser"),u.prototype),u),S=n(105),C=new(f=function(){function e(){Object(i.a)(this,e),Object(r.a)(this,"list",b,this),Object(r.a)(this,"page",y,this),Object(r.a)(this,"limit",h,this),Object(r.a)(this,"isLoading",m,this),Object(r.a)(this,"hasMore",O,this)}return Object(o.a)(e,[{key:"append",value:function(e){this.list=this.list.concat(e)}},{key:"find",value:function(){var e=this;this.isLoading=!0,F(this.page,this.limit).then((function(t){e.append(t),t.length<e.limit&&(e.hasMore=!1)})).catch((function(e){S.a.error("\u52a0\u8f7d\u5931\u8d25")})).finally((function(){e.isLoading=!1}))}},{key:"reset",value:function(){this.list=[],this.page=0,this.limit=10,this.isLoading=!1,this.hasMore=!0}}]),e}(),b=Object(a.a)(f.prototype,"list",[c.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=Object(a.a)(f.prototype,"page",[c.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=Object(a.a)(f.prototype,"limit",[c.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),m=Object(a.a)(f.prototype,"isLoading",[c.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),O=Object(a.a)(f.prototype,"hasMore",[c.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Object(a.a)(f.prototype,"append",[c.f],Object.getOwnPropertyDescriptor(f.prototype,"append"),f.prototype),Object(a.a)(f.prototype,"find",[c.f],Object.getOwnPropertyDescriptor(f.prototype,"find"),f.prototype),Object(a.a)(f.prototype,"reset",[c.f],Object.getOwnPropertyDescriptor(f.prototype,"reset"),f.prototype),f),W=new(g=function(){function e(){Object(i.a)(this,e),Object(r.a)(this,"fileName",j,this),Object(r.a)(this,"file",d,this),Object(r.a)(this,"isUploading",w,this),Object(r.a)(this,"serverFile",v,this)}return Object(o.a)(e,[{key:"setFileName",value:function(e){this.fileName=e}},{key:"setFile",value:function(e){this.file=e}},{key:"upload",value:function(){var e=this;return this.isUploading=!0,this.serverFile=null,new Promise((function(t,n){N(e.file,e.fileName).then((function(n){e.serverFile=n,t(n)})).catch((function(e){console.log("\u4e0a\u4f20\u5931\u8d25"),n(e)})).finally((function(){e.isUploading=!1}))}))}},{key:"reset",value:function(){this.isUploading=!1,this.serverFile=null}}]),e}(),j=Object(a.a)(g.prototype,"fileName",[c.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=Object(a.a)(g.prototype,"file",[c.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=Object(a.a)(g.prototype,"isUploading",[c.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=Object(a.a)(g.prototype,"serverFile",[c.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(a.a)(g.prototype,"setFileName",[c.f],Object.getOwnPropertyDescriptor(g.prototype,"setFileName"),g.prototype),Object(a.a)(g.prototype,"setFile",[c.f],Object.getOwnPropertyDescriptor(g.prototype,"setFile"),g.prototype),Object(a.a)(g.prototype,"upload",[c.f],Object.getOwnPropertyDescriptor(g.prototype,"upload"),g.prototype),Object(a.a)(g.prototype,"reset",[c.f],Object.getOwnPropertyDescriptor(g.prototype,"reset"),g.prototype),g),M=new(U=function(){function e(){Object(i.a)(this,e),Object(r.a)(this,"isLogin",k,this),Object(r.a)(this,"isLoading",P,this),Object(r.a)(this,"values",E,this)}return Object(o.a)(e,[{key:"setIsLogin",value:function(e){this.isLogin=e}},{key:"setUsername",value:function(e){this.values.username=e}},{key:"setPassword",value:function(e){this.values.password=e}},{key:"login",value:function(){var e=this;return new Promise((function(t,n){x(e.values.username,e.values.password).then((function(n){S.a.success("".concat(e.values.username," \u767b\u5f55\u6210\u529f")),I.pullUser(),t(n)})).catch((function(e){S.a.error("\u767b\u5f55\u5931\u8d25"),I.resetUser(),n(e)}))}))}},{key:"register",value:function(){var e=this;return new Promise((function(t,n){z(e.values.username,e.values.password).then((function(e){S.a.success("\u6ce8\u518c\u6210\u529f"),I.pullUser(),t(e)})).catch((function(e){S.a.error("\u6ce8\u518c\u5931\u8d25"),I.resetUser(),n(e)}))}))}},{key:"logout",value:function(){D(),C.reset(),W.reset(),S.a.success("\u6ce8\u9500\u6210\u529f"),I.resetUser()}}]),e}(),k=Object(a.a)(U.prototype,"isLogin",[c.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=Object(a.a)(U.prototype,"isLoading",[c.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=Object(a.a)(U.prototype,"values",[c.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{username:"",password:""}}}),Object(a.a)(U.prototype,"setIsLogin",[c.f],Object.getOwnPropertyDescriptor(U.prototype,"setIsLogin"),U.prototype),Object(a.a)(U.prototype,"setUsername",[c.f],Object.getOwnPropertyDescriptor(U.prototype,"setUsername"),U.prototype),Object(a.a)(U.prototype,"setPassword",[c.f],Object.getOwnPropertyDescriptor(U.prototype,"setPassword"),U.prototype),Object(a.a)(U.prototype,"login",[c.f],Object.getOwnPropertyDescriptor(U.prototype,"login"),U.prototype),Object(a.a)(U.prototype,"register",[c.f],Object.getOwnPropertyDescriptor(U.prototype,"register"),U.prototype),Object(a.a)(U.prototype,"logout",[c.f],Object.getOwnPropertyDescriptor(U.prototype,"logout"),U.prototype),U),R=n(0),A=Object(R.createContext)({AuthStore:M,UserStore:I,ImageStore:W,HistoryStore:C});t.a=function(){return Object(R.useContext)(A)}},74:function(e,t,n){e.exports=n(104)},79:function(e,t,n){},80:function(e,t,n){}},[[74,2,3]]]);
//# sourceMappingURL=main.3285811a.chunk.js.map